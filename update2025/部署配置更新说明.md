# éƒ¨ç½²é…ç½®æ›´æ–°è¯´æ˜

## æ¦‚è¿°

é¡¹ç›®å·²æ›´æ–°ä¸ºåŒç¯å¢ƒé…ç½®ï¼Œéœ€è¦å¯¹éƒ¨ç½²è„šæœ¬è¿›è¡Œç›¸åº”è°ƒæ•´ã€‚

## ä¸»è¦å˜æ›´

### 1. æ„å»ºé…ç½®å˜æ›´

**ä¹‹å‰:**
```bash
# ç»Ÿä¸€ä½¿ç”¨ä¸€ä¸ªæ„å»ºå‘½ä»¤
npm run build
```

**ç°åœ¨:**
```bash
# Windows å¼€å‘ç¯å¢ƒ
npm run build:win

# Linux ç”Ÿäº§ç¯å¢ƒ  
npm run build:linux
```

### 2. Dockerfile æ›´æ–°

**å·²æ›´æ–°å†…å®¹:**
```dockerfile
# ä½¿ç”¨ä¸“é—¨çš„ Linux æ„å»ºå‘½ä»¤
RUN pnpm run build:linux
```

### 3. ç¯å¢ƒæ£€æµ‹é€»è¾‘

**æ–°å¢åŠŸèƒ½:**
- è‡ªåŠ¨æ£€æµ‹è¿è¡Œå¹³å° (Windows/Linux)
- è‡ªåŠ¨å¯ç”¨/ç¦ç”¨ standalone è¾“å‡º
- æ„å»ºæ—¶æ˜¾ç¤ºé…ç½®ä¿¡æ¯

## éƒ¨ç½²è„šæœ¬å…¼å®¹æ€§

### âœ… ç°æœ‰è„šæœ¬æ— éœ€ä¿®æ”¹

å¥½æ¶ˆæ¯æ˜¯ï¼Œç°æœ‰çš„éƒ¨ç½²è„šæœ¬ **æ— éœ€ä¿®æ”¹**ï¼Œå› ä¸ºï¼š

1. **update.sh** - ä½¿ç”¨ Docker æ„å»ºï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ `build:linux`
2. **quick-update.sh** - åŒæ ·ä½¿ç”¨ Docker æ„å»º
3. **Dockerfile** - å·²æ›´æ–°ä¸ºä½¿ç”¨ `build:linux`

### ğŸ”§ æ„å»ºè¡Œä¸ºå˜åŒ–

**Linux æœåŠ¡å™¨æ„å»ºæ—¶:**
```
ğŸ”§ Next.js é…ç½®ä¿¡æ¯:
   å¹³å°: linux
   ç¯å¢ƒ: production
   standalone è¾“å‡º: å¯ç”¨
```

**Windows å¼€å‘ç¯å¢ƒæ„å»ºæ—¶:**
```
ğŸ”§ Next.js é…ç½®ä¿¡æ¯:
   å¹³å°: win32
   ç¯å¢ƒ: development
   standalone è¾“å‡º: ç¦ç”¨
```

## éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æ„å»ºè¾“å‡º

éƒ¨ç½²åæŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼Œç¡®è®¤çœ‹åˆ°ï¼š
```
standalone è¾“å‡º: å¯ç”¨
âœ“ Generating static pages
âœ“ Finalizing page optimization
```

### 2. éªŒè¯ standalone ç›®å½•

åœ¨å®¹å™¨ä¸­æ£€æŸ¥æ˜¯å¦ç”Ÿæˆäº† standalone ç›®å½•ï¼š
```bash
sudo docker exec -it <container_name> ls -la .next/
# åº”è¯¥çœ‹åˆ° standalone ç›®å½•
```

### 3. æ£€æŸ¥åº”ç”¨åŠŸèƒ½

è®¿é—®åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯æ–°å¢çš„æ‹›æ ‡æ–‡ä»¶ç®¡ç†åŠŸèƒ½ï¼š
- ä¸»é¡µé¢: `http://your-server-ip`
- æ‹›æ ‡ç®¡ç†: ç‚¹å‡»"æ‹›æ ‡é‡‡è´­" â†’ "æ‹›æ ‡ç®¡ç†"
- ç›´æ¥è®¿é—®: `http://your-server-ip/bidding-management`

## æ•…éšœæ’é™¤

### é—®é¢˜1: æ„å»ºå¤±è´¥
**å¯èƒ½åŸå› :** ç¯å¢ƒå˜é‡æœªæ­£ç¡®è®¾ç½®
**è§£å†³æ–¹æ¡ˆ:** 
```bash
# åœ¨å®¹å™¨æ„å»ºå‰æ‰‹åŠ¨è®¾ç½®
export NODE_ENV=production
npm run build:linux
```

### é—®é¢˜2: standalone ç›®å½•æœªç”Ÿæˆ
**å¯èƒ½åŸå› :** é…ç½®æ£€æµ‹é€»è¾‘é”™è¯¯
**è§£å†³æ–¹æ¡ˆ:** 
```bash
# å¼ºåˆ¶ä½¿ç”¨ç”Ÿäº§é…ç½®
NODE_ENV=production npm run build
```

### é—®é¢˜3: æƒé™é”™è¯¯ï¼ˆåœ¨ Linux ä¸Šï¼‰
**è§£å†³æ–¹æ¡ˆ:** ç¡®ä¿ä»¥æ­£ç¡®ç”¨æˆ·æƒé™è¿è¡Œ Docker

## å›æ»šæ–¹æ¡ˆ

å¦‚æœæ–°é…ç½®æœ‰é—®é¢˜ï¼Œå¯ä»¥ä¸´æ—¶å›æ»šï¼š

1. **ä¸´æ—¶ä½¿ç”¨æ—§é…ç½®:**
```bash
# ç¼–è¾‘ next.config.mjsï¼Œå¼ºåˆ¶å¯ç”¨ standalone
output: 'standalone'
```

2. **ä½¿ç”¨åŸå§‹æ„å»ºå‘½ä»¤:**
```bash
# åœ¨ Dockerfile ä¸­ç›´æ¥ä½¿ç”¨
RUN npm run build
```

## åç»­ä¼˜åŒ–

### 1. æ·»åŠ æ„å»ºéªŒè¯è„šæœ¬

å¯ä»¥æ·»åŠ ä¸€ä¸ªéªŒè¯è„šæœ¬æ¥ç¡®ä¿æ„å»ºé…ç½®æ­£ç¡®ï¼š

```bash
#!/bin/bash
# verify-build.sh
echo "éªŒè¯æ„å»ºé…ç½®..."

if [ -d ".next/standalone" ]; then
    echo "âœ… standalone è¾“å‡ºæ­£å¸¸"
else
    echo "âŒ standalone è¾“å‡ºç¼ºå¤±"
    exit 1
fi

echo "âœ… æ„å»ºéªŒè¯é€šè¿‡"
```

### 2. ç›‘æ§æ„å»ºæ—¥å¿—

åœ¨éƒ¨ç½²è„šæœ¬ä¸­æ·»åŠ æ„å»ºé…ç½®æ£€æŸ¥ï¼š

```bash
# åœ¨ update.sh ä¸­æ·»åŠ 
echo "--- éªŒè¯æ„å»ºé…ç½® ---"
if docker exec container_name ls .next/standalone >/dev/null 2>&1; then
    echo "âœ… standalone è¾“å‡ºæ­£å¸¸"
else
    echo "âš ï¸  standalone è¾“å‡ºå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥"
fi
```

## æ€»ç»“

- âœ… **ç°æœ‰éƒ¨ç½²è„šæœ¬å…¼å®¹** - æ— éœ€ä¿®æ”¹
- âœ… **è‡ªåŠ¨ç¯å¢ƒæ£€æµ‹** - æ™ºèƒ½é€‰æ‹©é…ç½®
- âœ… **Windows å¼€å‘å‹å¥½** - é¿å…æƒé™é—®é¢˜
- âœ… **Linux ç”Ÿäº§ä¼˜åŒ–** - å®Œæ•´ standalone è¾“å‡º

æ–°é…ç½®å‘åå…¼å®¹ï¼Œéƒ¨ç½²è¿‡ç¨‹åº”è¯¥ä¸ä¹‹å‰å®Œå…¨ç›¸åŒï¼Œä½†æ„å»ºä¼šæ›´åŠ æ™ºèƒ½å’Œç¨³å®šã€‚ 